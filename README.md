
![Logo](https://xignature.co.id/assets/logo.png)


# Xignature Sign Gateway

This gateway running on Docker for sign your document from your premise using PAT (Personal Access Token) generated by OPEN API V3



## Environment Variables

To run this project, you will need to add the following environment variables

`API_KEY`
`API_URL`

## Running Docker Container


### Login Docker Registry

```bash
  docker login registry.xignature.co.id -u public -p CS0BkvzAytj9yxj
```

### Run Docker Container

```bash
  docker run -d --name sign-gateway \
  -p 1303:1303 \
  -e API_URL={{API_URL}} \
  -e API_KEY=your-api-key \
  registry.xignature.co.id/xignature/public-sign-gateway
```

{{API_UR}}
- SANDBOX = https://sandbox.xignature.co.id
- PRODUCTION = https://api.xignature.co.id

## HTTP API Reference

#### Stamp Document

```http
  POST /stamp/document
```

#### Request Body

| Parameter | Type     | Description                |
| :-------- | :------- | :------------------------- |
| `pat` | `string` | **Required**. |
| `location` | `string` | **Required**. |
| `reason` | `string` | **Required**. |
| `location` | `string` | **Required**. |
| `signatureImage?` | `base64 string` | (optional) |
| `signPositions` | `signPositionObject[]` | **Required**. |
| `document` | `base64 string` | (optional) |

#### Sign Position Object

| Parameter | Type     | Description                |
| :-------- | :------- | :------------------------- |
| `page` | `number` | **Required**. |
| `x` | `number` | **Required**. |
| `y` | `number` | **Required**. |
| `w` | `number` | optional default (130) |
| `h` | `number` | optional default (50) |


### Request Example

``` javascript
{
    "pat": "pat here",
    "location": "Indonesia, Jakarta",
    "reason": "I Approve this document",
    "signatureImage": "base64 string image",
    "document": "base64 string pdf",
    "signPositions": [
        {
            "page": 1,
            "x" : 100,
            "y": 100,
            "w": 130,
            "h": 50
        }
    ]
}
```

#### Response Body

| Parameter | Type     | Description                |
| :-------- | :------- | :------------------------- |
| `signedDocument` | `base64 string` | Result signed document |
